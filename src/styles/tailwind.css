@import "tailwindcss";

/* =========
   THEME
   ========= */
@theme {
  /* Couleurs brand */
  --color-primary: #2563eb;     /* bleu */
  --color-secondary: #7c3aed;   /* violet */
  --color-success: #16a34a;     /* vert */
  --color-warning: #f59e0b;     /* orange */
  --color-danger:  #dc2626;     /* rouge */
  --color-muted:   #6b7280;     /* gray-500 approx */

  /* Surfaces (peuvent être mappées par l’app hôte) */
  --color-bg: #ffffff;
  --color-bg-muted: #f9fafb;
  --color-border: #e5e7eb;

  /* Typo */
  --font-sans: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Rayon / Ombres */
  --radius-sm: .25rem;
  --radius-md: .5rem;
  --radius-lg: .75rem;

  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

/* =========
   BASE
   ========= */
@layer base {
  html { @apply font-sans; }
  body { @apply bg-[--color-bg] text-gray-900; }
  a { @apply text-primary hover:opacity-90; }
  code, pre { @apply font-mono; }
}

/* =========
   UTILITAIRE FOCUS
   ========= */
@layer utilities {
  .focus-ring { @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2; }
}

/* =========
   COMPONENTS
   ========= */

/* Bouton universel + variantes + tailles */
@layer components {
  .tw-btn {
    @apply inline-flex items-center justify-center gap-2
           px-4 py-2 rounded-md
           text-white bg-primary
           transition-colors duration-150
           hover:opacity-90
           active:opacity-95
           disabled:opacity-50 disabled:cursor-not-allowed
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50;
    box-shadow: var(--shadow-sm);
  }
  .tw-btn--secondary { @apply bg-secondary text-white; }
  .tw-btn--success   { @apply bg-success text-white; }
  .tw-btn--warning   { @apply bg-warning text-white; }
  .tw-btn--danger    { @apply bg-danger  text-white; }
  .tw-btn--outline   { @apply bg-transparent text-primary border border-current hover:bg-primary/10; }
  .tw-btn--ghost     { @apply bg-transparent text-primary hover:bg-primary/10; }
  .tw-btn--sm        { @apply text-sm px-3 py-1.5; }
  .tw-btn--lg        { @apply text-lg px-5 py-3; }
  .tw-btn--icon      { @apply p-2 rounded-full aspect-square; }

  /* Badge / Tag */
  .tw-badge {
    @apply inline-flex items-center gap-1
           rounded-full px-2.5 py-0.5 text-xs font-medium
           bg-gray-100 text-gray-700;
  }
  .tw-badge--primary  { @apply bg-primary/10 text-primary; }
  .tw-badge--success  { @apply bg-success/10 text-success; }
  .tw-badge--warning  { @apply bg-warning/10 text-warning; }
  .tw-badge--danger   { @apply bg-danger/10  text-danger;  }
  .tw-badge--secondary{ @apply bg-secondary/10 text-secondary; }

  /* Card */
  .tw-card {
    @apply rounded-lg border border-[--color-border] bg-white;
    box-shadow: var(--shadow-sm);
  }
  .tw-card-header { @apply p-4 border-b border-[--color-border] flex items-center justify-between; }
  .tw-card-title  { @apply text-lg font-semibold; }
  .tw-card-subtle { @apply text-sm text-gray-500; }
  .tw-card-body   { @apply p-4; }
  .tw-card-footer { @apply p-4 border-t border-[--color-border]; }

  /* Input + Label + Helper + Erreur */
  .tw-label  { @apply block text-sm font-medium text-gray-700 mb-1; }
  .tw-input  { @apply block w-full rounded-md border border-[--color-border] bg-white px-3 py-2 placeholder:text-gray-400
                      focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40; }
  .tw-input--error { @apply border-danger focus-visible:ring-danger/40; }
  .tw-helper { @apply text-xs text-gray-500 mt-1; }
  .tw-error  { @apply text-xs text-danger mt-1; }

  /* Alert */
  .tw-alert        { @apply rounded-md p-4 border flex items-start gap-3; }
  .tw-alert--info  { @apply bg-primary/5 border-primary/30 text-primary; }
  .tw-alert--good  { @apply bg-success/5 border-success/30 text-success; }
  .tw-alert--warn  { @apply bg-warning/5 border-warning/30 text-warning; }
  .tw-alert--bad   { @apply bg-danger/5  border-danger/30  text-danger;  }
}

/* =========
   ICONES (mask-image vector 1em scalable)
   ========= */
@layer utilities {
  .icon {
    display: inline-block;
    inline-size: 1em; block-size: 1em;
    vertical-align: -0.125em;
    background-color: currentColor;
    -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
    -webkit-mask-position: center;  mask-position: center;
    -webkit-mask-size: contain;     mask-size: contain;
  }

  .icon-home   { -webkit-mask-image: url("../icons/home.svg");   mask-image: url("../icons/home.svg"); }
  .icon-search { -webkit-mask-image: url("../icons/search.svg"); mask-image: url("../icons/search.svg"); }

  /* Helpers de taille basés sur text-* (optionnels) */
  .icon-sm { @apply text-sm; }
  .icon-md { @apply text-base; }
  .icon-lg { @apply text-2xl; }
}
